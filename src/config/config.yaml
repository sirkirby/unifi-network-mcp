unifi:
  host: ${UNIFI_HOST}
  username: ${UNIFI_USERNAME}
  password: ${UNIFI_PASSWORD}
  port: ${oc.env:UNIFI_PORT,443}
  site: ${oc.env:UNIFI_SITE,default}
  verify_ssl: ${oc.env:UNIFI_VERIFY_SSL,false}
  controller_type: ${oc.env:UNIFI_CONTROLLER_TYPE,auto}

server:
  host: ${oc.env:UNIFI_MCP_HOST,0.0.0.0}
  port: ${oc.env:UNIFI_MCP_PORT,3000}
  log_level: INFO

  # Tool registration mode
  # Options: eager, lazy, meta_only
  # - eager: Register all tools immediately - Best for dev console, automation
  # - lazy: Register meta-tools, load others on-demand - RECOMMENDED for LLMs
  # - meta_only: Register only meta-tools, manual discovery - Maximum context savings
  tool_registration_mode: ${oc.env:UNIFI_TOOL_REGISTRATION_MODE,lazy}

  # Tool filtering (optional, for eager mode)
  # Use these to limit which tools are registered for automation/n8n workflows
  #
  # enabled_categories: Only load tools from these categories (module names in src/tools/)
  #   Valid values:
  #     - clients        # Client listing, blocking, guest auth
  #     - config         # Configuration management
  #     - devices        # Device listing, reboot, locate, upgrade
  #     - events         # Events and alarms
  #     - firewall       # Firewall rules and groups
  #     - hotspot        # Vouchers for guest network
  #     - network        # Network/VLAN management
  #     - port_forwards  # Port forwarding rules
  #     - qos            # QoS/traffic shaping rules
  #     - routing        # Static routes (V1 API)
  #     - stats          # Statistics and metrics
  #     - system         # System info, health, settings
  #     - traffic_routes # Policy-based routing (V2 API)
  #     - usergroups     # Bandwidth profiles/user groups
  #     - vpn            # VPN servers and clients
  #   Example: "clients,devices,system" or ["clients", "devices", "system"]
  #
  # enabled_tools: Only register these specific tools (use with enabled_categories or alone)
  #   Example: "unifi_list_clients,unifi_list_devices" or ["unifi_list_clients", "unifi_list_devices"]
  #
  # Note: Tools may also be filtered by the permissions section below (e.g., update: false)
  # If neither is set, all tools are registered (default behavior)
  enabled_categories: ${oc.env:UNIFI_ENABLED_CATEGORIES,null}
  enabled_tools: ${oc.env:UNIFI_ENABLED_TOOLS,null}

  http:
    enabled: ${oc.env:UNIFI_MCP_HTTP_ENABLED,false}
    force: ${oc.env:UNIFI_MCP_HTTP_FORCE,false}
  diagnostics:
    enabled: ${oc.env:UNIFI_MCP_DIAGNOSTICS,false}
    log_tool_args: ${oc.env:UNIFI_MCP_DIAG_LOG_TOOL_ARGS,true}
    log_tool_result: ${oc.env:UNIFI_MCP_DIAG_LOG_TOOL_RESULT,true}
    max_payload_chars: ${oc.env:UNIFI_MCP_DIAG_MAX_PAYLOAD,2000}
  
permissions:

  default:
    create: true
    update: true

  firewall_policies:
    create: true
    update: true
    
  traffic_routes:
    create: true
    update: true
    
  port_forwards:
    create: true
    update: true
    
  qos_rules:
    create: true
    update: true
    
  vpn_clients:
    create: true
    update: true

  networks:
    create: false  # Provisioning a new network can disrupt traffic
    update: false  # Changing subnets, VLANs, DHCP ranges requires care

  wlans:
    create: false
    update: false

  devices:
    create: false  # Adoption / provisioning â€“ normally handled by controller, not tools
    update: false  # Firmware upgrade, rename, etc.

  clients:
    create: false  # Not applicable, but kept for symmetry
    update: false  # Block/unblock, rename, reconnect

  vpn_servers:
    create: false
    update: true

  events:
    create: false  # Events are read-only
    update: true   # Allow archiving alarms

  vouchers:
    create: true   # Allow creating guest vouchers
    update: true   # Allow revoking vouchers

  usergroups:
    create: true   # Allow creating bandwidth profiles
    update: true   # Allow modifying bandwidth limits

  routes:
    create: false  # Static routes can disrupt connectivity
    update: false  # Modifying routes requires careful planning

  snmp:
    create: false  # Not applicable
    update: true   # Allow enabling/disabling SNMP and changing community